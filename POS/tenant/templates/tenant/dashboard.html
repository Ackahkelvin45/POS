
{%extends 'POS/layout.html'%}
{% load static %}
{%block body%}
            <main class="mt-20 max-vs:mt-[6.6rem]">
                <div class="grid mb-4 pb-10 px-8 max-vs:px-1 mx-4 max-vs:mx-0 rounded-3xl bg-gray-100 border border-indigo-200">

                    <div class="grid grid-cols-12 gap-6">
                        <div class="grid grid-cols-12 col-span-12 gap-6 xxl:col-span-9">
                            <div class="col-span-12 mt-8">
                                <div class="flex items-center h-10 intro-y">
                                    <h2 class="mr-5 text-lg font-medium truncate">Dashboard</h2>
                                </div>
                                <div class="grid grid-cols-12 gap-6 mt-5">
                               
                                    <a class="transform border-[1px] border-indigo-200  transition duration-300 shadow-xl rounded-lg col-span-12 sm:col-span-6 xl:col-span-4 intro-y bg-white"
                                    href="#">
                                    <div class="p-5">
                                        <div class="flex justify-between">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-green-400"
                                                fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z" />
                                            </svg>
                                            <div
                                                class="{% if  salesdecrease %} bg-red-500 {%endif%} {% if  salesincrease %} bg-green-500 {%endif%} {% if  salessame %} bg-yellow-500 {%endif%} rounded-full h-6 px-2 flex justify-items-center text-white font-semibold text-sm">
                                                <span class="flex items-center">{{percentage_change_in_sales}}%</span>
                                            </div>
                                        </div>
                                        <div class="ml-2 w-full flex-1">
                                            <div>
                                                <div class="mt-1 text-base text-gray-600">GH₵</div>
                                                <div class="mt-3 text-3xl font-bold leading-8">{{daily_total_cost_price}}</div>

                                                <div class="mt-1 text-base text-gray-600">Today's  Sales</div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                                    <a class="transform border-[1px] border-indigo-200   transition duration-300 shadow-xl rounded-lg col-span-12 sm:col-span-6 xl:col-span-4 intro-y bg-white"
                                        href="#">
                                        <div class="p-5">
                                            <div class="flex justify-between">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-yellow-400"
                                                    fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2"
                                                        d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                                </svg>
                                                <div
                                                class="{% if  profitdecrease %} bg-red-500 {%endif%} {% if  increasedprofit %} bg-green-500 {%endif%} {% if  profitsame %} bg-yellow-500 {%endif%} rounded-full h-6 px-2 flex justify-items-center text-white font-semibold text-sm">
                                                <span class="flex items-center">{{percentage_change_in_profit}}%</span>
                                            </div>
                                               
                                            </div>
                                            <div class="ml-2 w-full flex-1">
                                                <div>
                                                    <div class="mt-1 text-base text-gray-600">GH₵</div>
                                                    <div class="mt-3 text-3xl font-bold leading-8">{{daily_profit}}</div>

                                                    <div class="mt-1 text-base text-gray-600">Today's Gross Profit</div>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                    <a class="transform border-[1px] border-indigo-200  transition duration-300 shadow-xl rounded-lg col-span-12 sm:col-span-6 xl:col-span-4 intro-y bg-white"
                                        href="#">
                                        <div class="p-5">
                                            <div class="flex justify-between">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-pink-600"
                                                    fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2"
                                                        d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z" />
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2"
                                                        d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z" />
                                                </svg>
                                                <div
                                                    class="{% if  amountdecrease %} bg-red-500 {%endif%} {% if  increasedamount %} bg-green-500 {%endif%} {% if  amountsame%} bg-yellow-500 {%endif%} rounded-full h-6 px-2 flex justify-items-center text-white font-semibold text-sm">
                                                    <span class="flex items-center">{{percentage_change_in_amount}}%</span>
                                                </div>
                                            </div>
                                            <div class="ml-2 w-full flex-1">
                                                <div>
                                                    <div class="mt-1 text-base text-gray-600">Quantity</div>
                                                    <div class="mt-3 text-3xl font-bold leading-8">{{daily_sales_amount}}</div>

                                                    <div class="mt-1 text-base text-gray-600">Today's sales</div>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                   
                                </div>
                            </div>
                            <div class="col-span-12 mt-5 space-y-4">
                                <div class="grid gap-2 grid-cols-1 lg:grid-cols-1">
                                    <div class="bg-white shadow-lg p-4" id="chartline"></div>
                            
                                </div>
                                <div class="grid gap-2 grid-cols-1 lg:grid-cols-1 my-5">
                                   
                                    <div class="bg-white shadow-lg" id="chartpie"></div>
                                </div>
                                <div class="grid gap-2 grid-cols-1 lg:grid-cols-1">
                                
                                    <div class="bg-white shadow-lg" id="chartbar2"></div>
                                </div>

                                <div class="grid gap-2 grid-cols-1 lg:grid-cols-1">
                                
                                    <div class="bg-white shadow-lg" id="chartbar"></div>
                                </div>

                                <div class="grid gap-2 grid-cols-1 lg:grid-cols-2">
                                    

<div class="w-full max-w-md p-4 bg-white border border-gray-200 rounded-lg shadow sm:p-8 dark:bg-gray-800 dark:border-gray-700">
    <div class="flex items-center justify-between mb-4">
        <h5 class="text-xl font-bold leading-none text-gray-900 dark:text-white">Top Products in 24hrs</h5>
        <a href="#" class="text-sm font-medium text-blue-600 hover:underline dark:text-blue-500">
            View all
        </a>
   </div>
   <div class="flow-root">
        <ul role="list" class="divide-y divide-gray-200 dark:divide-gray-700">
            {% for product in top_5_products_in_24_hours%}
            <li class="py-3 sm:py-4">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <img class="w-8 h-8 rounded-full" 
                        
                       {% if product.product__product_image %} src="/media/{{product.product__product_image}}" {%else%} src="/theme/static/img/profile/image.png" {%endif%} alt="Neil image">
                    </div>
                    <div class="flex-1 min-w-0 ms-4">
                        <p class="text-sm font-medium text-gray-900 truncate dark:text-white">
                           {{product.product__name}}
                        </p>
                     
                    </div>
                    <div class="inline-flex items-center text-base font-semibold text-gray-900 dark:text-white">
                       {{product.total_quantity_sold}}
                    </div>
                </div>
            </li>
            {%endfor%}
            
        </ul>
   </div>
</div>

                                </div>
                               
                            </div>
                           
                        </div>
                    </div>
                </div>
            </main>
    
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

    <script>
            
            var options = {
          series: [{
            name: "Sales",
            data: [{%for sale in daily_sales%}
{{sale.total_cost_price}},
{%endfor%}]
        }],
          chart: {
          height: 350,
          type: 'line',
          zoom: {
            enabled: false
          }
        },
        dataLabels: {
          enabled: false
        },
        stroke: {
          curve: 'straight'
        },
        title: {
          text: 'Daily Sales Trend',
          align: 'left'
        },
        markers: {
    size: 4,
    colors: undefined,
    strokeColors: '#fff',
    strokeWidth: 2,
    strokeOpacity: 0.9,
    strokeDashArray: 0,
    fillOpacity: 1,
    discrete: [],
    shape: "circle",
    radius: 2,
    
    hover: {
      size: undefined,
      sizeOffset: 3
    }
},
        grid: {
          row: {
            colors: ['#f3f3f3', 'transparent'], // takes an array which will be repeated on columns
            opacity: 0.5
          },
        },
        xaxis: {
          categories: [],
        }
        };

        var chart = new ApexCharts(document.querySelector("#chartline"), options);
        chart.render();
       
    </script>
 
    
    <script>
        
      
        var options = {
          series: [{
          name: 'Cost Price',
          data: [{% for sale in sales_by_month%}{{sale.total_cost_price}}, {%endfor%}]
        }, {
          name: 'Gross Profit',
          data: [{% for sale in sales_by_month%}{{sale.total_gross_profit}}, {%endfor%}]
        }],
          chart: {
          type: 'bar',
          height: 350
        },
        plotOptions: {
          bar: {
            horizontal: false,
            columnWidth: '55%',
            endingShape: 'rounded'
          },
        },
        dataLabels: {
          enabled: false
        },
        stroke: {
          show: true,
          width: 2,
          colors: ['transparent']
        },
        xaxis: {
          categories:[{% for sale in sales_by_month%}"{{sale.month|date:"M" }}", {%endfor%}] ,
        },
        yaxis: {
          title: {
            text: 'GH₵'
          }
        },
        fill: {
          opacity: 1
        },
        tooltip: {
          y: {
            formatter: function (val) {
              return "GH₵" + val 
            }
          }
        },
        title: {
          text: 'monthly sales perfomance 2023',
          align: 'left'
        }
        };

        var chart = new ApexCharts(document.querySelector("#chartbar"), options);
        chart.render();
    </script>


<script>
        
      
    var options = {
      series: [{
      name: 'Cost Price',
      data: [{% for sale in sales_by_week%}{{sale.total_cost_price}}, {%endfor%}]
    }, {
      name: 'Gross Profit',
      data: [{% for sale in sales_by_week%}{{sale.total_gross_profit}}, {%endfor%}]
    }],
      chart: {
      type: 'bar',
      height: 350
    },
    plotOptions: {
      bar: {
        horizontal: false,
        columnWidth: '55%',
        endingShape: 'rounded'
      },
    },
    dataLabels: {
      enabled: false
    },
    stroke: {
      show: true,
      width: 2,
      colors: ['transparent']
    },
    xaxis: {
      categories:[{% for sale in sales_by_week%}"{{sale.day|date:"l" }}", {%endfor%}] ,
    },
    yaxis: {
      title: {
        text: 'GH₵'
      }
    },
    fill: {
      opacity: 1
    },
    tooltip: {
      y: {
        formatter: function (val) {
          return "GH₵" + val 
        }
      }
    },
    title: {
      text: 'weekly sales perfomance ',
      align: 'left'
    }
    };

    var chart = new ApexCharts(document.querySelector("#chartbar2"), options);
    chart.render();
</script>
        {%endblock%}
